/* ═══════════════════════════════════════════════
   style.css  —  Ping  |  Dark & sleek, iPad-first
   ═══════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600&family=Syne:wght@700;800&display=swap');

/* ── Reset ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
button { cursor: pointer; font-family: inherit; }
img    { display: block; }

/* ── Tokens ── */
:root {
  --bg:         #1a1b1e;
  --bg2:        #141517;
  --bg3:        #0f1012;
  --panel:      #1e1f23;
  --surface:    rgba(255,255,255,0.055);
  --surface2:   rgba(255,255,255,0.095);
  --border:     rgba(255,255,255,0.08);
  --border2:    rgba(255,255,255,0.14);
  --accent:     #5865f2;    /* Discord-ish */
  --accent-h:   #4752c4;
  --accent-glow:rgba(88,101,242,0.32);
  --green:      #3ba55d;
  --red:        #ed4245;
  --yellow:     #faa61a;
  --text:       #dcddde;
  --text2:      #8e9297;
  --text3:      #4f545c;
  --radius:     8px;
  --radius-lg:  16px;
  --font:       'DM Sans', sans-serif;
  --font-d:     'Syne', sans-serif;
  --sidebar-w:  260px;
  --ease:       cubic-bezier(.4,0,.2,1);
}

html, body {
  height: 100%;
  overflow: hidden;
  font-family: var(--font);
  background: var(--bg3);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  font-size: 15px;
}

/* ── Scrollbar ── */
::-webkit-scrollbar       { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface2); border-radius: 4px; }

/* ── Utility ── */
.glass {
  background:          rgba(30,31,35,0.85);
  backdrop-filter:     blur(24px) saturate(160%);
  -webkit-backdrop-filter: blur(24px) saturate(160%);
  border:              1px solid var(--border2);
}
.hidden { display: none !important; }

/* ── Screens ── */
.screen {
  position: fixed; inset: 0;
  display:  none;
  align-items: center; justify-content: center;
}
.screen.active { display: flex; }

/* ── Loading splash ── */
#screen-loading {
  background: var(--bg3);
  flex-direction: column;
  gap: 24px;
}
.loading-content { display: flex; flex-direction: column; align-items: center; gap: 20px; }
.brand-icon-lg   { font-size: 64px; animation: pulse 1.5s ease infinite; }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.92)} }
.loader-bar  { width: 160px; height: 3px; background: var(--surface2); border-radius: 3px; overflow: hidden; }
.loader-fill { height: 100%; width: 40%; background: var(--accent); border-radius: 3px;
               animation: slide 1.2s var(--ease) infinite; }
@keyframes slide { 0%{transform:translateX(-100%)} 100%{transform:translateX(350%)} }

/* ── Orbs (login bg) ── */
.login-bg {
  position: absolute; inset: 0; overflow: hidden;
  background: radial-gradient(ellipse at 15% 25%, rgba(88,101,242,.18) 0%, transparent 55%),
              radial-gradient(ellipse at 85% 75%, rgba(88,101,242,.12) 0%, transparent 55%),
              var(--bg3);
}
.orb { position:absolute; border-radius:50%; filter:blur(90px); opacity:.4; animation:float 10s ease-in-out infinite; }
.orb1{ width:500px;height:500px;background:#5865f2;top:-150px;left:-100px;animation-delay:0s; }
.orb2{ width:350px;height:350px;background:#8045dd;bottom:-80px;right:-80px;animation-delay:4s; }
.orb3{ width:280px;height:280px;background:#3b82f6;top:40%;left:45%;animation-delay:7s; }
@keyframes float { 0%,100%{transform:translateY(0) scale(1)} 50%{transform:translateY(-25px) scale(1.04)} }

/* ── Login card ── */
.login-card {
  position: relative; z-index: 1;
  border-radius: var(--radius-lg);
  padding: 52px 44px;
  max-width: 400px; width: 90%;
  text-align: center;
  box-shadow: 0 40px 100px rgba(0,0,0,.7);
  animation: slideUp .4s var(--ease);
}
@keyframes slideUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:none} }

.brand        { margin-bottom: 36px; }
.brand-icon   { font-size: 48px; display: block; margin-bottom: 8px; }
.brand-name   {
  font-family: var(--font-d); font-size: 44px; font-weight: 800; letter-spacing: -2px;
  background: linear-gradient(135deg,#fff 20%,#8a93ff);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.brand-tagline { color: var(--text2); font-size: 14px; margin-top: 6px; }

.btn-google {
  display: flex; align-items: center; gap: 12px; justify-content: center;
  width: 100%; padding: 14px 20px;
  border-radius: var(--radius); border: 1px solid var(--border2);
  background: var(--surface2); color: var(--text);
  font-size: 15px; font-weight: 500;
  transition: background .2s, transform .15s, box-shadow .2s;
}
.btn-google:hover { background: rgba(255,255,255,.13); transform: translateY(-1px); box-shadow: 0 8px 28px rgba(0,0,0,.4); }
.btn-google:active { transform: none; }

.login-error { color: var(--red); font-size: 13px; min-height: 18px; margin-top: 8px; }

/* ── Profile setup ── */
.setup-wrap {
  position: relative; z-index: 1;
  border-radius: var(--radius-lg); padding: 44px 40px;
  max-width: 420px; width: 90%;
  display: flex; flex-direction: column; align-items: center; gap: 16px;
  box-shadow: 0 40px 100px rgba(0,0,0,.7);
  animation: slideUp .35s var(--ease);
}
.setup-wrap h2 { font-family: var(--font-d); font-size: 24px; font-weight: 800; }
.setup-wrap .sub { color: var(--text2); font-size: 13px; margin-top: -8px; }

.avatar-picker { position: relative; width: 96px; height: 96px; }
.avatar-picker img { width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid var(--accent); }
.avatar-edit-btn {
  position:absolute;bottom:0;right:0;width:28px;height:28px;border-radius:50%;
  background:var(--accent);display:flex;align-items:center;justify-content:center;
  font-size:13px;cursor:pointer;border:2px solid var(--bg3);
}

.input-field {
  width: 100%; padding: 12px 16px;
  border-radius: var(--radius); border: 1px solid var(--border2);
  background: var(--bg2); color: var(--text);
  font-family: var(--font); font-size: 15px; outline: none;
  transition: border-color .2s, box-shadow .2s;
}
.input-field:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }
.input-field::placeholder { color: var(--text3); }
.input-field.small { padding: 9px 13px; font-size: 14px; }

.btn-primary {
  width: 100%; padding: 13px;
  border-radius: var(--radius); border: none;
  background: var(--accent); color: #fff;
  font-size: 15px; font-weight: 600;
  transition: background .2s, transform .15s, box-shadow .2s;
  box-shadow: 0 4px 18px var(--accent-glow);
}
.btn-primary:hover { background: var(--accent-h); transform: translateY(-1px); }
.btn-primary:active { transform: none; }
.btn-primary:disabled { opacity: .5; cursor: not-allowed; transform: none; }

/* ═══════════════════════════════════════════════
   APP LAYOUT
   ═══════════════════════════════════════════════ */
#screen-app {
  display: flex;
  align-items: stretch;
}
#screen-app.active { display: flex; }

/* ── Sidebar ── */
.sidebar {
  width: var(--sidebar-w);
  height: 100vh;
  background: var(--bg2);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overflow: hidden;
}

.sidebar-header {
  display: flex; align-items: center; gap: 10px;
  padding: 14px 12px;
  border-bottom: 1px solid var(--border);
  background: var(--bg3);
}
.my-avatar-wrap { position: relative; flex-shrink: 0; }
.my-avatar-wrap img { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; }
.online-dot {
  position:absolute;bottom:0;right:0;width:10px;height:10px;
  border-radius:50%;background:var(--green);border:2px solid var(--bg3);
}
.my-name { flex:1; font-weight:600; font-size:14px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; color:var(--text); }

.icon-btn {
  background: transparent; border: none; color: var(--text2);
  font-size: 16px; padding: 5px 7px; border-radius: 6px;
  transition: background .15s, color .15s;
}
.icon-btn:hover { background: var(--surface2); color: var(--text); }

/* ── Tabs ── */
.sidebar-tabs {
  display: flex; gap: 2px;
  padding: 8px 8px 4px;
  background: var(--bg2);
}
.tab-btn {
  flex:1; padding: 7px 4px;
  border-radius: 6px; border: none;
  background: transparent; color: var(--text2);
  font-size: 12px; font-weight: 600;
  letter-spacing: .3px;
  transition: background .15s, color .15s;
}
.tab-btn.active  { background: var(--surface2); color: var(--text); }
.tab-btn:hover:not(.active) { background: var(--surface); color: var(--text); }

.tab-panel { display: none; flex-direction: column; flex: 1; overflow: hidden; min-height: 0; }
.tab-panel.active { display: flex; }

.list-container { flex:1; overflow-y:auto; padding: 4px; }

/* ── List items ── */
.list-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px;
  border-radius: var(--radius);
  transition: background .15s;
}
.list-item:hover { background: var(--surface); cursor: pointer; }
.list-item.active { background: var(--surface2); }

.avatar-wrap { position: relative; flex-shrink: 0; }
.list-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
.status-dot {
  position:absolute;bottom:0;right:0;width:11px;height:11px;
  border-radius:50%;border:2px solid var(--bg2);
}
.status-dot.online  { background: var(--green); }
.status-dot.offline { background: var(--text3); }

.list-info    { flex:1; min-width:0; }
.list-name    { display:block;font-weight:500;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap; }
.list-sub     { display:block;font-size:11px;color:var(--text2);margin-top:1px; }
.empty-hint   { color:var(--text3);font-size:13px;text-align:center;padding:20px 14px; }

/* Friend tab extras */
.add-friend-row { display:flex;gap:8px;padding:10px 10px 4px; }
.btn-icon-round {
  width:36px;height:36px;border-radius:50%;border:none;
  background:var(--accent);color:#fff;font-size:22px;
  display:flex;align-items:center;justify-content:center;flex-shrink:0;
  transition:background .15s,transform .15s;
}
.btn-icon-round:hover { background:var(--accent-h);transform:scale(1.07); }

.section-label { padding:8px 12px 3px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:var(--text3); }

.req-actions { display:flex;gap:5px; }
.req-btn { width:26px;height:26px;border-radius:50%;border:none;font-size:13px;display:flex;align-items:center;justify-content:center;transition:background .15s; }
.accept-req  { background:rgba(59,165,93,.2);color:var(--green); }
.decline-req { background:rgba(237,66,69,.2);color:var(--red); }
.accept-req:hover  { background:rgba(59,165,93,.4); }
.decline-req:hover { background:rgba(237,66,69,.4); }

.friend-chat-btn { background:transparent;border:none;font-size:17px;padding:4px 6px;border-radius:6px;transition:background .15s;color:var(--text2); }
.friend-chat-btn:hover { background:var(--surface2);color:var(--text); }

/* ═══════════════════════════════════════════════
   CHAT PANEL
   ═══════════════════════════════════════════════ */
.chat-panel {
  flex:1; display:flex; flex-direction:column;
  background: var(--panel); overflow: hidden;
  position: relative;
}

.chat-empty {
  flex:1; display:flex; align-items:center; justify-content:center;
  background: var(--panel);
}
.empty-inner { text-align:center; color:var(--text3); }
.empty-icon  { font-size:56px; display:block; margin-bottom:12px; opacity:.3; }
.empty-inner h3 { font-family:var(--font-d);font-weight:800;font-size:20px;margin-bottom:6px;color:var(--text2); }
.empty-inner p  { font-size:13px; }

.chat-active { flex:1;display:flex;flex-direction:column;min-height:0; }

/* ── Chat header ── */
.chat-header {
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;
  background:var(--bg2);
  border-bottom:1px solid var(--border);
  flex-shrink:0;
}
.chat-header img { width:38px;height:38px;border-radius:50%;object-fit:cover; }
.chat-peer-info { flex:1; display:flex;flex-direction:column; }
.chat-peer-info span:first-child { font-weight:600;font-size:15px; }
.peer-status { font-size:12px;color:var(--text2); }
.chat-header-actions { display:flex;gap:6px; }
.hdr-btn {
  width:36px;height:36px;border-radius:50%;border:none;
  background:var(--surface);font-size:17px;color:var(--text2);
  display:flex;align-items:center;justify-content:center;
  transition:background .15s,color .15s,transform .15s;
}
.hdr-btn:hover { background:var(--accent);color:#fff;transform:scale(1.06); }

/* ── Messages ── */
.messages-container {
  flex:1;overflow-y:auto;
  padding:16px 16px 8px;
  display:flex;flex-direction:column;gap:4px;
  scroll-behavior:smooth;
}

.msg-wrap {
  display:flex;align-items:flex-end;gap:6px;
  max-width:72%;
  animation:msgIn .18s var(--ease);
  position:relative;
}
@keyframes msgIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none} }
.msg-wrap.mine   { align-self:flex-end;flex-direction:row-reverse; }
.msg-wrap.theirs { align-self:flex-start; }

.bubble {
  padding:9px 13px;
  border-radius:14px;
  max-width:100%;
  position:relative;
  word-break:break-word;
}
.mine   .bubble { background:var(--accent);border-bottom-right-radius:3px;box-shadow:0 2px 12px var(--accent-glow); }
.theirs .bubble { background:var(--bg2);border:1px solid var(--border);border-bottom-left-radius:3px; }

.msg-text { font-size:15px;line-height:1.5; }
.msg-img  { max-width:220px;max-height:300px;border-radius:10px;object-fit:cover;margin-top:2px; }

.msg-meta { display:flex;align-items:center;gap:5px;margin-top:4px;justify-content:flex-end; }
.msg-time  { font-size:11px;opacity:.5; }
.read-tick { font-size:11px;opacity:.55; }
.read-tick.read { color:#7fff7f; }

.reactions-row { display:flex;flex-wrap:wrap;gap:3px;margin-top:4px; }
.reaction-badge {
  background:var(--surface);border:1px solid var(--border2);
  border-radius:20px;padding:2px 7px;font-size:12px;
  transition:background .15s;
}
.reaction-badge:hover { background:var(--surface2); }
.reaction-badge.mine-react { border-color:var(--accent);background:rgba(88,101,242,.2); }

.react-btn {
  width:22px;height:22px;border-radius:50%;
  background:var(--surface);border:1px solid var(--border2);
  font-size:12px;display:flex;align-items:center;justify-content:center;
  opacity:0;transition:opacity .15s;
  align-self:center;flex-shrink:0;color:var(--text2);
}
.msg-wrap:hover .react-btn { opacity:1; }

.floating-reaction-picker {
  position:absolute;bottom:calc(100% + 8px);left:0;
  display:flex;gap:3px;padding:7px 10px;border-radius:40px;
  z-index:200;animation:msgIn .15s var(--ease);
  box-shadow:0 8px 32px rgba(0,0,0,.5);
}
.floating-reaction-picker button {
  background:none;border:none;font-size:20px;padding:5px;
  border-radius:50%;transition:transform .15s;
}
.floating-reaction-picker button:hover { transform:scale(1.3); }

/* ── Emoji picker ── */
.emoji-picker {
  position:absolute;bottom:64px;right:14px;
  padding:10px;border-radius:14px;z-index:200;
  animation:msgIn .15s var(--ease);
  box-shadow:0 8px 32px rgba(0,0,0,.5);
}
.emoji-grid { display:grid;grid-template-columns:repeat(8,1fr);gap:2px; }
.emoji-opt  {
  background:none;border:none;font-size:21px;padding:5px;
  border-radius:7px;transition:background .12s,transform .12s;
}
.emoji-opt:hover { background:var(--surface2);transform:scale(1.2); }

/* ── Chat footer ── */
.chat-footer {
  display:flex;align-items:center;gap:8px;
  padding:10px 14px;
  background:var(--bg2);
  border-top:1px solid var(--border);
  flex-shrink:0;
  position:relative;
}
.attach-btn { font-size:19px;padding:5px;border-radius:7px;cursor:pointer;transition:background .15s;color:var(--text2); }
.attach-btn:hover { background:var(--surface2);color:var(--text); }
.msg-input {
  flex:1;padding:10px 15px;
  border-radius:24px;border:none;
  background:var(--bg3);color:var(--text);
  font-family:var(--font);font-size:15px;outline:none;
  transition:box-shadow .2s;
}
.msg-input:focus { box-shadow:0 0 0 2px var(--accent-glow); }
.msg-input::placeholder { color:var(--text3); }
.btn-send {
  width:38px;height:38px;border-radius:50%;border:none;
  background:var(--accent);color:#fff;
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;
  transition:background .15s,transform .15s,box-shadow .15s;
  box-shadow:0 3px 10px var(--accent-glow);
}
.btn-send:hover { background:var(--accent-h);transform:scale(1.07); }
.btn-send:active { transform:scale(.95); }

/* ═══════════════════════════════════════════════
   CALL OVERLAY
   ═══════════════════════════════════════════════ */
.call-overlay {
  position:fixed;inset:0;z-index:1000;
  display:flex;align-items:center;justify-content:center;
  animation:fadeIn .3s var(--ease);
}
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

.call-blur-bg {
  position:absolute;inset:0;
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(16px);
}

.call-card {
  position:relative;z-index:1;
  border-radius:24px;padding:36px 32px;
  min-width:340px;max-width:520px;width:90%;
  display:flex;flex-direction:column;align-items:center;gap:24px;
  box-shadow:0 40px 100px rgba(0,0,0,.8);
  animation:slideUp .35s var(--ease);
}

.call-peer-info { text-align:center; }
.call-peer-info img {
  width:90px;height:90px;border-radius:50%;object-fit:cover;
  border:3px solid var(--accent);
  box-shadow:0 0 0 8px var(--accent-glow);
  margin:0 auto 14px;
}
.call-peer-info h3 { font-family:var(--font-d);font-weight:800;font-size:22px;margin-bottom:6px; }
.call-status-text  { color:var(--text2);font-size:14px;animation:blink 2s ease infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.5} }

.call-timer { font-family:var(--font-d);font-size:20px;font-weight:700;letter-spacing:2px;color:var(--green); }

/* Video area */
.video-area {
  position:relative;width:100%;max-width:460px;
  border-radius:14px;overflow:hidden;background:#000;
  aspect-ratio:16/9;
}
.remote-video { width:100%;height:100%;object-fit:cover; }
.local-video  {
  position:absolute;bottom:10px;right:10px;
  width:100px;height:70px;border-radius:8px;object-fit:cover;
  border:2px solid var(--border2);box-shadow:0 4px 16px rgba(0,0,0,.5);
}

/* Call controls */
.call-controls { display:flex;gap:16px;justify-content:center; }
.call-ctrl-btn {
  width:54px;height:54px;border-radius:50%;border:none;
  font-size:22px;display:flex;align-items:center;justify-content:center;
  transition:transform .15s,background .15s,box-shadow .15s;
}
.mute-btn, .cam-btn   { background:var(--surface2);color:var(--text); }
.mute-btn:hover,
.cam-btn:hover        { background:var(--surface2);transform:scale(1.08); }
.mute-btn.active-ctrl { background:rgba(250,166,26,.2);color:var(--yellow); }
.cam-btn.active-ctrl  { background:rgba(237,66,69,.2);color:var(--red); }
.end-btn    { background:var(--red);color:#fff;box-shadow:0 4px 18px rgba(237,66,69,.4); }
.end-btn:hover { background:#c0393c;transform:scale(1.1);box-shadow:0 6px 24px rgba(237,66,69,.5); }

.incoming-actions { display:flex;gap:16px;justify-content:center; }
.accept-btn  { background:var(--green);color:#fff;box-shadow:0 4px 18px rgba(59,165,93,.4); }
.accept-btn:hover { background:#2f8a4e;transform:scale(1.1); }
.decline-btn { background:var(--red);color:#fff;box-shadow:0 4px 18px rgba(237,66,69,.4); }
.decline-btn:hover { background:#c0393c;transform:scale(1.1); }

/* ── Toast ── */
.toast {
  position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(16px);
  background:var(--bg2);border:1px solid var(--border2);
  backdrop-filter:blur(20px);color:var(--text);
  padding:11px 20px;border-radius:40px;
  font-size:14px;font-weight:500;
  opacity:0;transition:.28s var(--ease);
  pointer-events:none;z-index:9999;white-space:nowrap;
  box-shadow:0 8px 32px rgba(0,0,0,.5);
}
.toast.show  { opacity:1;transform:translateX(-50%) translateY(0); }
.toast.error { border-color:rgba(237,66,69,.5);background:rgba(237,66,69,.12); }
.toast.warn  { border-color:rgba(250,166,26,.4);background:rgba(250,166,26,.1); }

/* ── iPad tweaks ── */
@media (min-width:768px) and (max-width:1100px) {
  :root { --sidebar-w:240px; }
}

/* ── Phone: stack sidebar / chat ── */
@media (max-width:640px) {
  :root { --sidebar-w:100vw; }
  .chat-panel { position:fixed;inset:0;transform:translateX(100%);transition:transform .25s var(--ease); }
  .chat-panel.mobile-open { transform:none; }
  #screen-app { flex-direction:column; }
}
